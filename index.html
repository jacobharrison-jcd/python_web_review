<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Python HTML CSS Quiz Game</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
            height: 100%;
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        html {
            height: 100%;
        }
        .code-font {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        .pulse-correct {
            animation: pulseGreen 0.6s ease-in-out;
        }
        .pulse-incorrect {
            animation: pulseRed 0.6s ease-in-out;
        }
        @keyframes pulseGreen {
            0% { background-color: rgb(34, 197, 94); }
            50% { background-color: rgb(22, 163, 74); }
            100% { background-color: rgb(34, 197, 94); }
        }
        @keyframes pulseRed {
            0% { background-color: rgb(239, 68, 68); }
            50% { background-color: rgb(220, 38, 38); }
            100% { background-color: rgb(239, 68, 68); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full">
  <main class="min-h-full bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
   <div class="max-w-4xl mx-auto"><!-- Header -->
    <header class="text-center mb-8">
     <h1 id="game-title" class="text-4xl font-bold text-gray-800 mb-2">Python HTML CSS Quiz Game</h1>
     <p id="welcome-message" class="text-lg text-gray-600">Test your web development knowledge with this comprehensive quiz!</p>
    </header><!-- Start Screen -->
    <div id="start-screen" class="bg-white rounded-xl shadow-lg p-8 text-center">
     <div class="mb-6">
      <div class="text-6xl mb-4">
       üíª
      </div>
      <h2 class="text-2xl font-semibold text-gray-800 mb-4">Ready to Test Your Coding Skills?</h2>
      <p class="text-gray-600 mb-6">This comprehensive quiz covers Python fundamentals, HTML structure, and CSS styling!</p>
      <div class="grid grid-cols-3 gap-4 text-sm text-gray-600 mb-6">
       <div class="bg-blue-50 p-3 rounded-lg">
        <div class="text-2xl mb-1">
         üêç
        </div>
        <div class="font-semibold">
         Python
        </div>
        <div>
         Variables, loops, functions
        </div>
       </div>
       <div class="bg-orange-50 p-3 rounded-lg">
        <div class="text-2xl mb-1">
         üèóÔ∏è
        </div>
        <div class="font-semibold">
         HTML
        </div>
        <div>
         Tags, structure, forms
        </div>
       </div>
       <div class="bg-purple-50 p-3 rounded-lg">
        <div class="text-2xl mb-1">
         üé®
        </div>
        <div class="font-semibold">
         CSS
        </div>
        <div>
         Styling, layout, selectors
        </div>
       </div>
      </div>
     </div>
     <div class="mb-6"><label for="student-name" class="block text-sm font-medium text-gray-700 mb-2">Enter your name:</label> <input type="text" id="student-name" class="w-full max-w-md mx-auto px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Your name">
     </div><button id="start-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200"> Start Quiz (60 Questions) </button>
    </div><!-- Quiz Screen -->
    <div id="quiz-screen" class="hidden"><!-- Progress Bar -->
     <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
      <div class="flex justify-between items-center mb-2"><span class="text-sm font-medium text-gray-600">Progress</span> <span id="question-counter" class="text-sm font-medium text-gray-600">1 / 60</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-2">
       <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 1.67%"></div>
      </div>
     </div><!-- Score Display -->
     <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
      <div class="grid grid-cols-3 gap-4 text-center">
       <div>
        <div class="text-sm text-gray-600 mb-1">
         Score
        </div>
        <div class="text-xl font-bold text-blue-600"><span id="current-score">0</span><span class="text-gray-500"> / 60</span>
        </div>
       </div>
       <div>
        <div class="text-sm text-gray-600 mb-1">
         Current Streak
        </div>
        <div class="text-xl font-bold text-orange-600"><span id="current-streak-emoji"></span><span id="current-streak">0</span>
        </div>
       </div>
       <div>
        <div class="text-sm text-gray-600 mb-1">
         Best Streak
        </div>
        <div class="text-xl font-bold text-purple-600"><span id="best-streak-emoji"></span><span id="best-streak">0</span>
        </div>
       </div>
      </div>
     </div><!-- Question Card -->
     <div class="bg-white rounded-xl shadow-lg p-8">
      <div class="mb-6">
       <div class="flex items-center mb-4"><span id="question-category" class="px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 mr-3">PYTHON</span>
        <h3 id="question-title" class="text-xl font-semibold text-gray-800"></h3>
       </div>
       <div id="question-content" class="text-gray-700"></div>
      </div>
      <div id="answer-options" class="space-y-3"><!-- Answer options will be inserted here -->
      </div>
      <div id="feedback" class="hidden mt-6 p-4 rounded-lg">
       <div id="feedback-content"></div><button id="next-btn" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200"> Next Question </button>
      </div>
     </div>
    </div><!-- Results Screen -->
    <div id="results-screen" class="hidden bg-white rounded-xl shadow-lg p-8 text-center">
     <div class="mb-6">
      <div id="results-emoji" class="text-6xl mb-4">
       üéâ
      </div>
      <h2 id="completion-message" class="text-2xl font-semibold text-gray-800 mb-4">Great job completing the quiz!</h2>
     </div>
     <div class="bg-gray-50 rounded-lg p-6 mb-6">
      <div class="grid grid-cols-3 gap-4 text-center mb-4">
       <div>
        <div id="final-score" class="text-3xl font-bold text-blue-600">
         0
        </div>
        <div class="text-sm text-gray-600">
         Final Score
        </div>
       </div>
       <div>
        <div id="percentage" class="text-3xl font-bold text-green-600">
         0%
        </div>
        <div class="text-sm text-gray-600">
         Percentage
        </div>
       </div>
       <div>
        <div class="text-3xl font-bold text-purple-600"><span id="final-best-streak-emoji"></span><span id="final-best-streak">0</span>
        </div>
        <div class="text-sm text-gray-600">
         Best Streak
        </div>
       </div>
      </div>
      <div id="category-breakdown" class="grid grid-cols-3 gap-2 text-xs"><!-- Category scores will be inserted here -->
      </div>
     </div>
     <div class="space-y-3"><button id="restart-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200"> Take Quiz Again </button> <button id="view-scores-btn" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200"> View All Scores </button>
     </div>
    </div><!-- Scores Screen -->
    <div id="scores-screen" class="hidden bg-white rounded-xl shadow-lg p-8">
     <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-semibold text-gray-800">Quiz Results</h2><button id="back-to-results-btn" class="bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200"> Back </button>
     </div>
     <div id="scores-list" class="space-y-3"><!-- Scores will be inserted here -->
     </div>
     <div id="no-scores" class="hidden text-center text-gray-500 py-8">
      No quiz results yet. Take the quiz to see your scores here!
     </div>
    </div>
   </div>
  </main>
  <script>
        // Quiz questions data
        const questions = [
            // PYTHON QUESTIONS (30)
            {
                category: "PYTHON",
                title: "Variables and Assignment",
                question: "What will be the value of `x` after this code runs?",
                code: "x = 5\nx = x + 3",
                options: ["5", "8", "3", "Error"],
                correct: 1,
                explanation: "First x is assigned 5, then x becomes 5 + 3 = 8"
            },
            {
                category: "PYTHON",
                title: "String Data Type",
                question: "Which of these creates a string in Python?",
                code: null,
                options: ["'Hello World'", "42", "True", "3.14"],
                correct: 0,
                explanation: "Strings are created using single or double quotes around text"
            },
            {
                category: "PYTHON",
                title: "Integer vs Float",
                question: "What data type is the result of: 10 / 3",
                code: null,
                options: ["int", "float", "string", "boolean"],
                correct: 1,
                explanation: "Division (/) always returns a float in Python, even with whole numbers"
            },
            {
                category: "PYTHON",
                title: "Boolean Values",
                question: "What will this expression evaluate to?",
                code: "5 > 3 and 2 < 1",
                options: ["True", "False", "Error", "None"],
                correct: 1,
                explanation: "5 > 3 is True, but 2 < 1 is False. True AND False = False"
            },
            {
                category: "PYTHON",
                title: "String Concatenation",
                question: "What will this code output?",
                code: "name = 'Alice'\nage = '25'\nprint('Hello ' + name + ', you are ' + age)",
                options: ["Hello Alice, you are 25", "Hello Alice, you are age", "Error", "Hello name, you are 25"],
                correct: 0,
                explanation: "String concatenation joins the strings together with the + operator"
            },
            {
                category: "PYTHON",
                title: "If Statements",
                question: "What will this code print?",
                code: "score = 85\nif score >= 90:\n    print('A')\nelif score >= 80:\n    print('B')\nelse:\n    print('C')",
                options: ["A", "B", "C", "Nothing"],
                correct: 1,
                explanation: "score (85) is not >= 90, but it is >= 80, so 'B' is printed"
            },
            {
                category: "PYTHON",
                title: "For Loop with Range",
                question: "How many times will 'Hello' be printed?",
                code: "for i in range(3):\n    print('Hello')",
                options: ["2", "3", "4", "0"],
                correct: 1,
                explanation: "range(3) creates [0, 1, 2], so the loop runs 3 times"
            },
            {
                category: "PYTHON",
                title: "While Loop",
                question: "What will be the final value of `count`?",
                code: "count = 0\nwhile count < 5:\n    count = count + 1",
                options: ["4", "5", "6", "Infinite loop"],
                correct: 1,
                explanation: "The loop stops when count becomes 5 (no longer < 5)"
            },
            {
                category: "PYTHON",
                title: "Arithmetic Operators",
                question: "What is the result of: 17 % 5",
                code: null,
                options: ["3", "2", "3.4", "12"],
                correct: 1,
                explanation: "The % operator gives the remainder: 17 √∑ 5 = 3 remainder 2"
            },
            {
                category: "PYTHON",
                title: "Comparison Operators",
                question: "Which expression evaluates to True?",
                code: null,
                options: ["5 == '5'", "10 != 10", "'abc' > 'xyz'", "3 <= 3"],
                correct: 3,
                explanation: "3 <= 3 is True because 3 is equal to 3 (less than OR equal to)"
            },
            {
                category: "PYTHON",
                title: "Input Function",
                question: "What data type does the input() function always return?",
                code: null,
                options: ["int", "float", "string", "boolean"],
                correct: 2,
                explanation: "input() always returns a string, even if the user types numbers"
            },
            {
                category: "PYTHON",
                title: "Type Conversion",
                question: "What will this code output?",
                code: "num = int('42')\nprint(num + 8)",
                options: ["428", "50", "Error", "'42' + 8"],
                correct: 1,
                explanation: "int('42') converts the string '42' to integer 42, then 42 + 8 = 50"
            },
            {
                category: "PYTHON",
                title: "Nested If Statements",
                question: "What will this code print when x = 15?",
                code: "x = 15\nif x > 10:\n    if x < 20:\n        print('Medium')\n    else:\n        print('Large')\nelse:\n    print('Small')",
                options: ["Small", "Medium", "Large", "Nothing"],
                correct: 1,
                explanation: "x (15) > 10 is True, then x (15) < 20 is also True, so 'Medium' is printed"
            },
            {
                category: "PYTHON",
                title: "For Loop with Lists",
                question: "What will this code print?",
                code: "fruits = ['apple', 'banana']\nfor fruit in fruits:\n    print(fruit.upper())",
                options: ["apple banana", "APPLE BANANA", "APPLE\nBANANA", "Error"],
                correct: 2,
                explanation: "The loop prints each fruit in uppercase on separate lines: APPLE then BANANA"
            },
            {
                category: "PYTHON",
                title: "Logical Operators",
                question: "What will this expression evaluate to?",
                code: "not (True or False) and True",
                options: ["True", "False", "Error", "None"],
                correct: 1,
                explanation: "(True or False) = True, not True = False, False and True = False"
            },
            {
                category: "PYTHON",
                title: "String Indexing",
                question: "What will this code output?",
                code: "word = 'Python'\nprint(word[0] + word[-1])",
                options: ["Pn", "Py", "Po", "Error"],
                correct: 0,
                explanation: "word[0] is 'P' (first character), word[-1] is 'n' (last character), so 'P' + 'n' = 'Pn'"
            },
            {
                category: "PYTHON",
                title: "List Operations",
                question: "What will be the length of this list?",
                code: "numbers = [1, 2, 3]\nnumbers.append(4)\nnumbers.append(5)",
                options: ["3", "4", "5", "Error"],
                correct: 2,
                explanation: "The list starts with 3 elements, then 2 more are appended, making it 5 elements total"
            },
            {
                category: "PYTHON",
                title: "String Methods",
                question: "What will this code output?",
                code: "text = 'hello world'\nprint(text.title())",
                options: ["hello world", "HELLO WORLD", "Hello World", "Hello world"],
                correct: 2,
                explanation: "The title() method capitalizes the first letter of each word"
            },
            {
                category: "PYTHON",
                title: "Floor Division",
                question: "What is the result of: 17 // 5",
                code: null,
                options: ["3", "3.4", "2", "4"],
                correct: 0,
                explanation: "Floor division (//) gives the whole number part: 17 √∑ 5 = 3.4, floor is 3"
            },
            {
                category: "PYTHON",
                title: "Multiple Assignment",
                question: "What will be the values of a and b after this code?",
                code: "a = 10\nb = 20\na, b = b, a",
                options: ["a=10, b=20", "a=20, b=10", "a=30, b=30", "Error"],
                correct: 1,
                explanation: "This is tuple unpacking that swaps the values: a becomes 20, b becomes 10"
            },
            {
                category: "PYTHON",
                title: "Range with Step",
                question: "What numbers will this loop print?",
                code: "for i in range(2, 10, 3):\n    print(i)",
                options: ["2, 5, 8", "2, 3, 4, 5, 6, 7, 8, 9", "3, 6, 9", "2, 4, 6, 8"],
                correct: 0,
                explanation: "range(2, 10, 3) starts at 2, stops before 10, steps by 3: 2, 5, 8"
            },
            {
                category: "PYTHON",
                title: "String Slicing",
                question: "What will this code output?",
                code: "text = 'Programming'\nprint(text[2:5])",
                options: ["ogr", "rog", "Pro", "ram"],
                correct: 1,
                explanation: "text[2:5] gets characters from index 2 to 4 (not including 5): 'rog'"
            },
            {
                category: "PYTHON",
                title: "Boolean Conversion",
                question: "Which of these evaluates to False in Python?",
                code: null,
                options: ["bool(1)", "bool('False')", "bool([])", "bool(' ')"],
                correct: 2,
                explanation: "Empty lists [] are falsy in Python. Non-empty strings (even 'False' and ' ') are truthy"
            },
            {
                category: "PYTHON",
                title: "List Indexing",
                question: "What will this code output?",
                code: "colors = ['red', 'blue', 'green']\nprint(colors[-2])",
                options: ["red", "blue", "green", "Error"],
                correct: 1,
                explanation: "Negative indexing counts from the end: -1 is 'green', -2 is 'blue'"
            },
            {
                category: "PYTHON",
                title: "String Repetition",
                question: "What will this code output?",
                code: "print('Hi' * 3)",
                options: ["Hi Hi Hi", "HiHiHi", "Hi3", "Error"],
                correct: 1,
                explanation: "String multiplication repeats the string: 'Hi' * 3 = 'HiHiHi'"
            },
            {
                category: "PYTHON",
                title: "Nested Loops",
                question: "How many times will 'X' be printed?",
                code: "for i in range(2):\n    for j in range(3):\n        print('X')",
                options: ["2", "3", "5", "6"],
                correct: 3,
                explanation: "Outer loop runs 2 times, inner loop runs 3 times each: 2 √ó 3 = 6 times total"
            },
            {
                category: "PYTHON",
                title: "Variable Scope",
                question: "What will this code output?",
                code: "x = 'global'\ndef test():\n    x = 'local'\n    print(x)\ntest()\nprint(x)",
                options: ["local global", "global local", "local local", "global global"],
                correct: 0,
                explanation: "Inside the function, x is 'local'. Outside, x remains 'global'"
            },
            {
                category: "PYTHON",
                title: "List Methods",
                question: "What will this code output?",
                code: "nums = [3, 1, 4, 1, 5]\nprint(nums.count(1))",
                options: ["1", "2", "3", "4"],
                correct: 1,
                explanation: "The count() method returns how many times 1 appears in the list: twice"
            },
            {
                category: "PYTHON",
                title: "String Formatting",
                question: "What will this code output?",
                code: "name = 'Bob'\nage = 25\nprint(f'Hello {name}, you are {age} years old')",
                options: ["Hello Bob, you are 25 years old", "Hello name, you are age years old", "Hello {name}, you are {age} years old", "Error"],
                correct: 0,
                explanation: "f-strings (formatted string literals) substitute variables inside {}: f'Hello {name}' becomes 'Hello Bob'"
            },
            {
                category: "PYTHON",
                title: "Break Statement",
                question: "What will this code output?",
                code: "for i in range(5):\n    if i == 3:\n        break\n    print(i)",
                options: ["0 1 2", "0 1 2 3", "0 1 2 3 4", "3 4"],
                correct: 0,
                explanation: "The loop prints 0, 1, 2, then breaks when i equals 3, so 3 is not printed"
            },

            // HTML QUESTIONS (30)
            {
                category: "HTML",
                title: "Basic HTML Structure",
                question: "Which tag is used to define the main content of an HTML document?",
                code: null,
                options: ["<content>", "<main>", "<section>", "<article>"],
                correct: 1,
                explanation: "The <main> tag represents the main content of the document, excluding headers, footers, and sidebars"
            },
            {
                category: "HTML",
                title: "HTML Headings",
                question: "Which heading tag creates the largest text by default?",
                code: null,
                options: ["<h6>", "<h3>", "<h1>", "<header>"],
                correct: 2,
                explanation: "<h1> creates the largest heading text, with <h6> being the smallest"
            },
            {
                category: "HTML",
                title: "HTML Links",
                question: "What attribute is used to specify the URL in an anchor tag?",
                code: "<a ___='https://example.com'>Click here</a>",
                options: ["src", "href", "link", "url"],
                correct: 1,
                explanation: "The href attribute specifies the URL that the link points to"
            },
            {
                category: "HTML",
                title: "HTML Images",
                question: "Which attribute is required for the <img> tag?",
                code: null,
                options: ["alt", "src", "width", "height"],
                correct: 1,
                explanation: "The src attribute is required to specify the image source URL"
            },
            {
                category: "HTML",
                title: "HTML Lists",
                question: "What does this HTML create?",
                code: "<ul>\n  <li>Apple</li>\n  <li>Banana</li>\n</ul>",
                options: ["Numbered list", "Bulleted list", "Definition list", "Table"],
                correct: 1,
                explanation: "<ul> creates an unordered (bulleted) list, while <ol> creates ordered (numbered) lists"
            },
            {
                category: "HTML",
                title: "HTML Tables",
                question: "Which tag is used to create a table row?",
                code: null,
                options: ["<td>", "<tr>", "<th>", "<table>"],
                correct: 1,
                explanation: "<tr> creates table rows, <td> creates data cells, and <th> creates header cells"
            },
            {
                category: "HTML",
                title: "HTML Forms",
                question: "What type of input creates a password field?",
                code: "<input type='___' name='password'>",
                options: ["text", "password", "hidden", "secure"],
                correct: 1,
                explanation: "type='password' creates an input field that hides the entered text with dots or asterisks"
            },
            {
                category: "HTML",
                title: "HTML Attributes",
                question: "What does the 'id' attribute do?",
                code: null,
                options: ["Styles the element", "Creates a unique identifier", "Links to another page", "Makes text bold"],
                correct: 1,
                explanation: "The id attribute provides a unique identifier for an element, used for CSS styling and JavaScript"
            },
            {
                category: "HTML",
                title: "HTML Semantic Tags",
                question: "Which tag is best for a website's navigation menu?",
                code: null,
                options: ["<div>", "<nav>", "<menu>", "<header>"],
                correct: 1,
                explanation: "<nav> is the semantic HTML5 tag specifically designed for navigation links"
            },
            {
                category: "HTML",
                title: "HTML Text Formatting",
                question: "Which tag makes text bold?",
                code: null,
                options: ["<bold>", "<b>", "<strong>", "Both <b> and <strong>"],
                correct: 3,
                explanation: "Both <b> and <strong> make text bold, but <strong> also indicates importance semantically"
            },
            {
                category: "HTML",
                title: "HTML Comments",
                question: "How do you write a comment in HTML?",
                code: null,
                options: ["// This is a comment", "/* This is a comment */", "<!-- This is a comment -->", "# This is a comment"],
                correct: 2,
                explanation: "HTML comments use <!-- to start and --> to end the comment"
            },
            {
                category: "HTML",
                title: "HTML Document Type",
                question: "What does <!DOCTYPE html> do?",
                code: null,
                options: ["Creates a title", "Declares HTML5 document", "Links CSS file", "Creates a comment"],
                correct: 1,
                explanation: "<!DOCTYPE html> declares that this is an HTML5 document and helps browsers render it correctly"
            },
            {
                category: "HTML",
                title: "HTML Form Elements",
                question: "Which element creates a dropdown menu?",
                code: null,
                options: ["<dropdown>", "<select>", "<option>", "<menu>"],
                correct: 1,
                explanation: "<select> creates the dropdown, and <option> elements define the choices within it"
            },
            {
                category: "HTML",
                title: "HTML Meta Tags",
                question: "Where should meta tags be placed?",
                code: null,
                options: ["<body>", "<head>", "<footer>", "<main>"],
                correct: 1,
                explanation: "Meta tags belong in the <head> section and provide metadata about the HTML document"
            },
            {
                category: "HTML",
                title: "HTML Line Breaks",
                question: "Which tag creates a line break?",
                code: null,
                options: ["<break>", "<br>", "<lb>", "<newline>"],
                correct: 1,
                explanation: "<br> is a self-closing tag that creates a line break in the text"
            },
            {
                category: "HTML",
                title: "HTML Divisions",
                question: "What is the <div> tag used for?",
                code: null,
                options: ["Creating divisions in math", "Grouping elements", "Making text italic", "Creating links"],
                correct: 1,
                explanation: "<div> is a generic container used to group elements for styling and layout purposes"
            },
            {
                category: "HTML",
                title: "HTML Spans",
                question: "What's the difference between <div> and <span>?",
                code: null,
                options: ["No difference", "<div> is inline, <span> is block", "<div> is block, <span> is inline", "<span> is for images only"],
                correct: 2,
                explanation: "<div> is a block-level element (takes full width), <span> is inline (only takes needed width)"
            },
            {
                category: "HTML",
                title: "HTML Input Types",
                question: "What does <input type='email'> do?",
                code: null,
                options: ["Sends emails", "Validates email format", "Creates email links", "Nothing special"],
                correct: 1,
                explanation: "type='email' provides built-in email format validation and shows appropriate keyboard on mobile"
            },
            {
                category: "HTML",
                title: "HTML Accessibility",
                question: "What is the 'alt' attribute used for in images?",
                code: null,
                options: ["Alternative styling", "Alternative text for screen readers", "Alternative image source", "Alternative color"],
                correct: 1,
                explanation: "The alt attribute provides alternative text for screen readers and when images fail to load"
            },
            {
                category: "HTML",
                title: "HTML Validation",
                question: "Which attribute makes a form field required?",
                code: "<input type='text' ___>",
                options: ["mandatory", "required", "needed", "must"],
                correct: 1,
                explanation: "The 'required' attribute makes a form field mandatory before submission"
            },
            {
                category: "HTML",
                title: "HTML Entities",
                question: "How do you display the < symbol in HTML?",
                code: null,
                options: ["<", "&less;", "&lt;", "\\<"],
                correct: 2,
                explanation: "&lt; is the HTML entity for the less-than symbol, preventing it from being interpreted as a tag"
            },
            {
                category: "HTML",
                title: "HTML Iframe",
                question: "What does the <iframe> tag do?",
                code: null,
                options: ["Creates a frame border", "Embeds another webpage", "Creates an image frame", "Makes text framed"],
                correct: 1,
                explanation: "<iframe> embeds another HTML document within the current page"
            },
            {
                category: "HTML",
                title: "HTML Audio",
                question: "Which tag is used to embed audio files?",
                code: null,
                options: ["<sound>", "<audio>", "<music>", "<media>"],
                correct: 1,
                explanation: "<audio> is the HTML5 tag for embedding audio content in web pages"
            },
            {
                category: "HTML",
                title: "HTML Video",
                question: "What attribute makes a video play automatically?",
                code: "<video ___>",
                options: ["auto", "autoplay", "play", "start"],
                correct: 1,
                explanation: "The 'autoplay' attribute makes videos start playing automatically when the page loads"
            },
            {
                category: "HTML",
                title: "HTML Buttons",
                question: "What's the default type of a <button> element?",
                code: null,
                options: ["button", "submit", "reset", "click"],
                correct: 1,
                explanation: "The default type for <button> is 'submit', which submits forms when clicked"
            },
            {
                category: "HTML",
                title: "HTML Textarea",
                question: "Which attribute controls the visible size of a textarea?",
                code: null,
                options: ["size", "rows and cols", "width and height", "dimensions"],
                correct: 1,
                explanation: "'rows' and 'cols' attributes control the visible number of lines and characters per line"
            },
            {
                category: "HTML",
                title: "HTML Labels",
                question: "What does the <label> tag do?",
                code: null,
                options: ["Creates text labels", "Associates text with form controls", "Makes text bold", "Creates captions"],
                correct: 1,
                explanation: "<label> associates descriptive text with form controls, improving accessibility and usability"
            },
            {
                category: "HTML",
                title: "HTML Fieldset",
                question: "What is <fieldset> used for?",
                code: null,
                options: ["Setting field values", "Grouping form elements", "Creating text fields", "Field validation"],
                correct: 1,
                explanation: "<fieldset> groups related form elements together, often with a <legend> for the group title"
            },
            {
                category: "HTML",
                title: "HTML Progress",
                question: "Which tag shows a progress bar?",
                code: null,
                options: ["<bar>", "<progress>", "<meter>", "<loading>"],
                correct: 1,
                explanation: "<progress> displays a progress bar showing completion of a task"
            },
            {
                category: "HTML",
                title: "HTML Details",
                question: "What does the <details> tag create?",
                code: null,
                options: ["Detailed text", "Expandable content section", "Detail list", "Detailed images"],
                correct: 1,
                explanation: "<details> creates a collapsible content section that users can expand or collapse"
            },

            // CSS QUESTIONS (30)
            {
                category: "CSS",
                title: "CSS Selectors",
                question: "How do you select an element with id='header' in CSS?",
                code: null,
                options: [".header", "#header", "header", "*header"],
                correct: 1,
                explanation: "The # symbol is used to select elements by their id attribute"
            },
            {
                category: "CSS",
                title: "CSS Classes",
                question: "How do you select elements with class='button' in CSS?",
                code: null,
                options: ["#button", ".button", "button", "@button"],
                correct: 1,
                explanation: "The . (dot) symbol is used to select elements by their class attribute"
            },
            {
                category: "CSS",
                title: "CSS Colors",
                question: "Which of these is NOT a valid way to specify color in CSS?",
                code: null,
                options: ["color: red;", "color: #ff0000;", "color: rgb(255,0,0);", "color: red(255);"],
                correct: 3,
                explanation: "red(255) is not a valid CSS color format. Use named colors, hex, rgb(), or hsl()"
            },
            {
                category: "CSS",
                title: "CSS Box Model",
                question: "What is the correct order of the CSS box model from inside to outside?",
                code: null,
                options: ["margin, border, padding, content", "content, padding, border, margin", "padding, content, border, margin", "content, border, padding, margin"],
                correct: 1,
                explanation: "The box model order is: content (innermost), padding, border, margin (outermost)"
            },
            {
                category: "CSS",
                title: "CSS Display Property",
                question: "What does 'display: none;' do?",
                code: null,
                options: ["Makes element transparent", "Hides element completely", "Makes element very small", "Changes element color"],
                correct: 1,
                explanation: "display: none completely removes the element from the layout, making it invisible and taking no space"
            },
            {
                category: "CSS",
                title: "CSS Positioning",
                question: "What does 'position: relative;' do?",
                code: null,
                options: ["Positions relative to viewport", "Positions relative to parent", "Positions relative to its normal position", "Removes from document flow"],
                correct: 2,
                explanation: "position: relative positions the element relative to its normal position in the document flow"
            },
            {
                category: "CSS",
                title: "CSS Flexbox",
                question: "Which property is used to make a container a flex container?",
                code: null,
                options: ["flex: 1;", "display: flex;", "flex-direction: row;", "justify-content: center;"],
                correct: 1,
                explanation: "display: flex makes an element a flex container, enabling flexbox layout for its children"
            },
            {
                category: "CSS",
                title: "CSS Text Alignment",
                question: "How do you center text horizontally?",
                code: null,
                options: ["align: center;", "text-align: center;", "horizontal-align: center;", "center: true;"],
                correct: 1,
                explanation: "text-align: center centers text horizontally within its container"
            },
            {
                category: "CSS",
                title: "CSS Fonts",
                question: "Which property changes the font size?",
                code: null,
                options: ["font-size", "text-size", "size", "font-scale"],
                correct: 0,
                explanation: "font-size property controls the size of text"
            },
            {
                category: "CSS",
                title: "CSS Margins",
                question: "What does 'margin: 10px 20px;' do?",
                code: null,
                options: ["10px all around, 20px left/right", "10px top/bottom, 20px left/right", "20px top/bottom, 10px left/right", "10px top, 20px right"],
                correct: 1,
                explanation: "With 2 values, first is top/bottom margin, second is left/right margin"
            },
            {
                category: "CSS",
                title: "CSS Padding",
                question: "How do you add 15px padding only to the top?",
                code: null,
                options: ["padding: 15px;", "padding-top: 15px;", "top-padding: 15px;", "margin-top: 15px;"],
                correct: 1,
                explanation: "padding-top specifically sets padding for the top side only"
            },
            {
                category: "CSS",
                title: "CSS Borders",
                question: "What does this CSS do?",
                code: "border: 2px solid red;",
                options: ["2px red background", "2px red solid border", "2px red dotted border", "2px red text"],
                correct: 1,
                explanation: "This creates a 2-pixel wide, solid, red border around the element"
            },
            {
                category: "CSS",
                title: "CSS Background",
                question: "How do you set a background color?",
                code: null,
                options: ["color: blue;", "background-color: blue;", "bg-color: blue;", "background: color(blue);"],
                correct: 1,
                explanation: "background-color property sets the background color of an element"
            },
            {
                category: "CSS",
                title: "CSS Width and Height",
                question: "What unit is relative to the font size?",
                code: null,
                options: ["px", "em", "%", "pt"],
                correct: 1,
                explanation: "em is relative to the font-size of the element (1em = current font size)"
            },
            {
                category: "CSS",
                title: "CSS Float",
                question: "What does 'float: left;' do?",
                code: null,
                options: ["Moves element to left side", "Aligns text to left", "Makes element float to left side of container", "Rotates element left"],
                correct: 2,
                explanation: "float: left makes the element float to the left side, allowing other content to wrap around it"
            },
            {
                category: "CSS",
                title: "CSS Overflow",
                question: "What does 'overflow: hidden;' do?",
                code: null,
                options: ["Hides the element", "Clips content that overflows", "Makes content transparent", "Reduces element size"],
                correct: 1,
                explanation: "overflow: hidden clips any content that extends beyond the element's boundaries"
            },
            {
                category: "CSS",
                title: "CSS Z-Index",
                question: "What does z-index control?",
                code: null,
                options: ["Element width", "Element height", "Stacking order", "Element position"],
                correct: 2,
                explanation: "z-index controls the stacking order of positioned elements (which appears on top)"
            },
            {
                category: "CSS",
                title: "CSS Pseudo-classes",
                question: "What does ':hover' do?",
                code: null,
                options: ["Selects hovered elements", "Makes elements hover", "Creates hover effect", "Selects all elements"],
                correct: 0,
                explanation: ":hover pseudo-class selects elements when the user hovers over them with the mouse"
            },
            {
                category: "CSS",
                title: "CSS Media Queries",
                question: "What are media queries used for?",
                code: null,
                options: ["Playing media files", "Responsive design", "Database queries", "Image queries"],
                correct: 1,
                explanation: "Media queries apply different CSS styles based on device characteristics like screen size"
            },
            {
                category: "CSS",
                title: "CSS Grid",
                question: "How do you create a CSS Grid container?",
                code: null,
                options: ["display: grid;", "grid: true;", "layout: grid;", "grid-container: yes;"],
                correct: 0,
                explanation: "display: grid makes an element a grid container, enabling CSS Grid layout"
            },
            {
                category: "CSS",
                title: "CSS Transitions",
                question: "What does the transition property do?",
                code: null,
                options: ["Changes element position", "Creates smooth animations", "Transitions between pages", "Changes element color"],
                correct: 1,
                explanation: "The transition property creates smooth animations when CSS properties change"
            },
            {
                category: "CSS",
                title: "CSS Transform",
                question: "What does 'transform: rotate(45deg);' do?",
                code: null,
                options: ["Moves element 45 pixels", "Rotates element 45 degrees", "Scales element by 45%", "Changes element opacity"],
                correct: 1,
                explanation: "transform: rotate(45deg) rotates the element 45 degrees clockwise"
            },
            {
                category: "CSS",
                title: "CSS Opacity",
                question: "What value makes an element completely transparent?",
                code: "opacity: ___;",
                options: ["0", "1", "100", "transparent"],
                correct: 0,
                explanation: "opacity: 0 makes an element completely transparent, opacity: 1 is completely opaque"
            },
            {
                category: "CSS",
                title: "CSS Specificity",
                question: "Which selector has the highest specificity?",
                code: null,
                options: ["p", ".class", "#id", "p.class"],
                correct: 2,
                explanation: "ID selectors (#id) have higher specificity than class selectors (.class) or element selectors (p)"
            },
            {
                category: "CSS",
                title: "CSS Inheritance",
                question: "Which property is inherited by default?",
                code: null,
                options: ["margin", "padding", "color", "border"],
                correct: 2,
                explanation: "Text-related properties like color are inherited by child elements, while box model properties are not"
            },
            {
                category: "CSS",
                title: "CSS Units",
                question: "What does 'vh' stand for?",
                code: null,
                options: ["Very high", "Viewport height", "Vertical height", "Variable height"],
                correct: 1,
                explanation: "vh stands for viewport height - 1vh equals 1% of the viewport height"
            },
            {
                category: "CSS",
                title: "CSS Flexbox Direction",
                question: "What is the default flex-direction?",
                code: null,
                options: ["column", "row", "row-reverse", "column-reverse"],
                correct: 1,
                explanation: "The default flex-direction is 'row', which arranges flex items horizontally"
            },
            {
                category: "CSS",
                title: "CSS Text Decoration",
                question: "How do you remove underlines from links?",
                code: null,
                options: ["text-decoration: none;", "underline: none;", "link-decoration: none;", "text-underline: none;"],
                correct: 0,
                explanation: "text-decoration: none removes underlines, overlines, and other text decorations"
            },
            {
                category: "CSS",
                title: "CSS List Styles",
                question: "How do you remove bullet points from a list?",
                code: null,
                options: ["bullets: none;", "list-style: none;", "list-bullets: none;", "bullet-style: none;"],
                correct: 1,
                explanation: "list-style: none removes bullet points, numbers, and other list markers"
            },
            {
                category: "CSS",
                title: "CSS Box Sizing",
                question: "What does 'box-sizing: border-box;' do?",
                code: null,
                options: ["Adds border to box", "Includes padding and border in width", "Creates border around box", "Makes box border-only"],
                correct: 1,
                explanation: "border-box includes padding and border in the element's total width and height"
            }
        ];

        // Game state
        let currentQuestion = 0;
        let score = 0;
        let studentName = '';
        let startTime = 0;
        let gameData = [];
        let categoryScores = { PYTHON: 0, HTML: 0, CSS: 0 };
        let currentStreak = 0;
        let bestStreak = 0;
        let shuffledQuestions = [];

        // Shuffle array function (Fisher-Yates algorithm)
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Get streak emoji
        function getStreakEmoji(streak) {
            if (streak >= 10) return 'üöÄ';
            if (streak >= 5) return '‚ö°';
            if (streak >= 1) return 'üî•';
            return '';
        }

        // Default configuration
        const defaultConfig = {
            game_title: "Python HTML CSS Quiz Game",
            welcome_message: "Test your web development knowledge with this comprehensive quiz!",
            completion_message: "Great job completing the quiz!",
            primary_color: "#2563eb",
            surface_color: "#ffffff",
            text_color: "#374151",
            success_color: "#22c55e",
            accent_color: "#6366f1"
        };

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                gameData = data;
                if (document.getElementById('scores-screen').classList.contains('hidden') === false) {
                    renderScores();
                }
            }
        };

        // Element SDK configuration
        const elementConfig = {
            defaultConfig,
            onConfigChange: async (config) => {
                const title = config.game_title || defaultConfig.game_title;
                const welcome = config.welcome_message || defaultConfig.welcome_message;
                const completion = config.completion_message || defaultConfig.completion_message;
                const primaryColor = config.primary_color || defaultConfig.primary_color;
                const surfaceColor = config.surface_color || defaultConfig.surface_color;
                const textColor = config.text_color || defaultConfig.text_color;

                document.getElementById('game-title').textContent = title;
                document.getElementById('welcome-message').textContent = welcome;
                document.getElementById('completion-message').textContent = completion;

                // Update colors
                const buttons = document.querySelectorAll('button:not(.answer-option)');
                buttons.forEach(btn => {
                    if (!btn.classList.contains('bg-gray-600')) {
                        btn.style.backgroundColor = primaryColor;
                    }
                });

                const cards = document.querySelectorAll('.bg-white');
                cards.forEach(card => {
                    card.style.backgroundColor = surfaceColor;
                });

                const textElements = document.querySelectorAll('.text-gray-800, .text-gray-700');
                textElements.forEach(el => {
                    el.style.color = textColor;
                });
            },
            mapToCapabilities: (config) => ({
                recolorables: [
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            mapToEditPanelValues: (config) => new Map([
                ["game_title", config.game_title || defaultConfig.game_title],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message],
                ["completion_message", config.completion_message || defaultConfig.completion_message]
            ])
        };

        // Initialize SDKs
        async function initializeApp() {
            try {
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }

                if (window.elementSdk) {
                    await window.elementSdk.init(elementConfig);
                }
            } catch (error) {
                console.error("Failed to initialize SDKs:", error);
            }
        }

        // Start the quiz
        function startQuiz() {
            const nameInput = document.getElementById('student-name');
            studentName = nameInput.value.trim();
            
            if (!studentName) {
                nameInput.style.borderColor = '#ef4444';
                nameInput.placeholder = 'Please enter your name';
                return;
            }

            // Shuffle questions for random order
            shuffledQuestions = shuffleArray(questions);
            
            currentQuestion = 0;
            score = 0;
            currentStreak = 0;
            bestStreak = 0;
            startTime = Date.now();
            categoryScores = { PYTHON: 0, HTML: 0, CSS: 0 };
            
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            
            showQuestion();
        }

        // Display current question
        function showQuestion() {
            const question = shuffledQuestions[currentQuestion];
            
            document.getElementById('question-counter').textContent = `${currentQuestion + 1} / ${questions.length}`;
            document.getElementById('progress-bar').style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            document.getElementById('current-score').textContent = score;
            document.getElementById('current-streak').textContent = currentStreak;
            document.getElementById('current-streak-emoji').textContent = getStreakEmoji(currentStreak);
            document.getElementById('best-streak').textContent = bestStreak;
            document.getElementById('best-streak-emoji').textContent = getStreakEmoji(bestStreak);
            
            // Update category badge
            const categoryBadge = document.getElementById('question-category');
            categoryBadge.textContent = question.category;
            categoryBadge.className = `px-3 py-1 text-xs font-semibold rounded-full mr-3 ${
                question.category === 'PYTHON' ? 'bg-blue-100 text-blue-800' :
                question.category === 'HTML' ? 'bg-orange-100 text-orange-800' :
                'bg-purple-100 text-purple-800'
            }`;
            
            document.getElementById('question-title').textContent = question.title;
            
            let questionHTML = `<p class="mb-4">${question.question}</p>`;
            if (question.code) {
                questionHTML += `<pre class="bg-gray-100 p-4 rounded-lg code-font text-sm mb-4">${question.code}</pre>`;
            }
            
            document.getElementById('question-content').innerHTML = questionHTML;
            
            const optionsContainer = document.getElementById('answer-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'answer-option w-full text-left p-4 border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-all duration-200';
                button.innerHTML = `<span class="font-medium">${String.fromCharCode(65 + index)}.</span> ${option}`;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('feedback').classList.add('hidden');
        }

        // Handle answer selection
        function selectAnswer(selectedIndex) {
            const question = shuffledQuestions[currentQuestion];
            const isCorrect = selectedIndex === question.correct;
            
            // Disable all options
            const options = document.querySelectorAll('.answer-option');
            options.forEach((option, index) => {
                option.disabled = true;
                option.classList.remove('hover:border-blue-300', 'hover:bg-blue-50');
                
                if (index === question.correct) {
                    option.classList.add('border-green-500', 'bg-green-100', 'pulse-correct');
                } else if (index === selectedIndex && !isCorrect) {
                    option.classList.add('border-red-500', 'bg-red-100', 'pulse-incorrect');
                } else {
                    option.classList.add('opacity-50');
                }
            });
            
            if (isCorrect) {
                score++;
                currentStreak++;
                if (currentStreak > bestStreak) {
                    bestStreak = currentStreak;
                }
                categoryScores[question.category]++;
            } else {
                currentStreak = 0;
            }
            
            // Update display
            document.getElementById('current-score').textContent = score;
            document.getElementById('current-streak').textContent = currentStreak;
            document.getElementById('current-streak-emoji').textContent = getStreakEmoji(currentStreak);
            document.getElementById('best-streak').textContent = bestStreak;
            document.getElementById('best-streak-emoji').textContent = getStreakEmoji(bestStreak);
            
            // Show feedback
            const feedback = document.getElementById('feedback');
            const feedbackContent = document.getElementById('feedback-content');
            
            feedbackContent.innerHTML = `
                <div class="flex items-center mb-2">
                    <span class="text-2xl mr-2">${isCorrect ? '‚úÖ' : '‚ùå'}</span>
                    <span class="font-semibold ${isCorrect ? 'text-green-600' : 'text-red-600'}">
                        ${isCorrect ? 'Correct!' : 'Incorrect'}
                    </span>
                </div>
                <p class="text-gray-700">${question.explanation}</p>
            `;
            
            feedback.classList.remove('hidden');
            feedback.className = feedback.className.replace('hidden', '') + (isCorrect ? ' bg-green-50 border border-green-200' : ' bg-red-50 border border-red-200');
        }

        // Move to next question
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        // Show final results
        async function showResults() {
            const timeTaken = Math.round((Date.now() - startTime) / 1000);
            const percentage = Math.round((score / questions.length) * 100);
            
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
            
            document.getElementById('final-score').textContent = `${score} / ${questions.length}`;
            document.getElementById('percentage').textContent = `${percentage}%`;
            document.getElementById('final-best-streak').textContent = bestStreak;
            document.getElementById('final-best-streak-emoji').textContent = getStreakEmoji(bestStreak);
            
            // Set emoji based on performance
            const emoji = percentage >= 90 ? 'üèÜ' : percentage >= 80 ? 'üéâ' : percentage >= 70 ? 'üëè' : percentage >= 60 ? 'üëç' : 'üìö';
            document.getElementById('results-emoji').textContent = emoji;
            
            // Show category breakdown
            const breakdown = document.getElementById('category-breakdown');
            breakdown.innerHTML = `
                <div class="bg-blue-50 p-2 rounded text-center">
                    <div class="text-blue-800 font-semibold">üêç Python</div>
                    <div class="text-blue-600">${categoryScores.PYTHON}/20</div>
                </div>
                <div class="bg-orange-50 p-2 rounded text-center">
                    <div class="text-orange-800 font-semibold">üèóÔ∏è HTML</div>
                    <div class="text-orange-600">${categoryScores.HTML}/20</div>
                </div>
                <div class="bg-purple-50 p-2 rounded text-center">
                    <div class="text-purple-800 font-semibold">üé® CSS</div>
                    <div class="text-purple-600">${categoryScores.CSS}/20</div>
                </div>
            `;
            
            // Save results to Data SDK
            if (window.dataSdk && gameData.length < 999) {
                const result = await window.dataSdk.create({
                    student_name: studentName,
                    score: score,
                    total_questions: questions.length,
                    completed_at: new Date().toISOString(),
                    time_taken: timeTaken,
                    best_streak: bestStreak
                });
                
                if (!result.isOk) {
                    console.error("Failed to save quiz results");
                }
            } else if (gameData.length >= 999) {
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mt-4';
                feedbackDiv.textContent = 'Maximum limit of 999 quiz results reached. Your score was not saved.';
                document.getElementById('results-screen').appendChild(feedbackDiv);
            }
        }

        // Restart quiz
        function restartQuiz() {
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
            document.getElementById('student-name').value = '';
        }

        // Show scores screen
        function showScores() {
            document.getElementById('results-screen').classList.add('hidden');
            document.getElementById('scores-screen').classList.remove('hidden');
            renderScores();
        }

        // Render scores list
        function renderScores() {
            const scoresList = document.getElementById('scores-list');
            const noScores = document.getElementById('no-scores');
            
            if (gameData.length === 0) {
                scoresList.classList.add('hidden');
                noScores.classList.remove('hidden');
                return;
            }
            
            scoresList.classList.remove('hidden');
            noScores.classList.add('hidden');
            
            // Sort by score (descending) then by time (ascending)
            const sortedData = [...gameData].sort((a, b) => {
                if (b.score !== a.score) return b.score - a.score;
                return a.time_taken - b.time_taken;
            });
            
            scoresList.innerHTML = sortedData.map((result, index) => {
                const percentage = Math.round((result.score / result.total_questions) * 100);
                const date = new Date(result.completed_at).toLocaleDateString();
                const time = new Date(result.completed_at).toLocaleTimeString();
                const streakDisplay = result.best_streak ? `‚≠ê ${result.best_streak}` : '';
                
                return `
                    <div class="bg-gray-50 rounded-lg p-4 flex justify-between items-center">
                        <div>
                            <div class="font-semibold text-gray-800">${result.student_name}</div>
                            <div class="text-sm text-gray-600">${date} at ${time}</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-lg ${percentage >= 80 ? 'text-green-600' : percentage >= 60 ? 'text-yellow-600' : 'text-red-600'}">
                                ${result.score}/${result.total_questions} (${percentage}%)
                            </div>
                            <div class="text-sm text-gray-500">${result.time_taken}s ${streakDisplay}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Back to results
        function backToResults() {
            document.getElementById('scores-screen').classList.add('hidden');
            document.getElementById('results-screen').classList.remove('hidden');
        }

        // Event listeners
        document.getElementById('start-btn').addEventListener('click', startQuiz);
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('restart-btn').addEventListener('click', restartQuiz);
        document.getElementById('view-scores-btn').addEventListener('click', showScores);
        document.getElementById('back-to-results-btn').addEventListener('click', backToResults);

        // Allow Enter key to start quiz
        document.getElementById('student-name').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                startQuiz();
            }
        });

        // Initialize the application
        initializeApp();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'999645a4849d5304',t:'MTc2MjI4MTk2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
